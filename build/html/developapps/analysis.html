

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Analysis &mdash; hyperledger-fabricdocs master 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Process and Data Design" href="architecture.html" />
    <link rel="prev" title="The scenario" href="scenario.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="../index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=../_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="../_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="../_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="../_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="../_static/images/youtube_button.png"/></a>

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">v2.0 Alpha 新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html#release-notes">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developing_applications.html">开发应用程序</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scenario.html">The scenario</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#commercial-paper-lifecycle">Commercial paper lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transactions">Transactions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#issue">Issue</a></li>
<li class="toctree-l4"><a class="reference internal" href="#buy">Buy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#redeem">Redeem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-ledger">The Ledger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Process and Data Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="smartcontract.html">Smart Contract Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="application.html">Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="designelements.html">应用程序设计元素</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops_guide.html">操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_ref.html">命令参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">架构参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fabric-FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributions Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">发布</a></li>
<li class="toctree-l1"><a class="reference internal" href="../questions.html">Still Have Questions?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../status.html">Status</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyperledger-fabricdocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="developing_applications.html">开发应用程序</a> &raquo;</li>
        
      <li>Analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developapps/analysis.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="analysis">
<h1>Analysis<a class="headerlink" href="#analysis" title="永久链接至标题">¶</a></h1>
<p>受众：架构师、应用程序开发者和智能合约开发者、业务专家</p>
<p>让我们更详细地分析一下商业票据。PaperNet的参与者，如MagnetoCorp和DigiBank，使用商业票据交易来实现他们的业务目标——让我们研究一下商业票据的结构以及随着时间的推移影响它的交易。我们还将根据网络中组织之间的信任关系，考虑PaperNet中的哪些组织需要签署交易。稍后我们将重点讨论资金如何在买家和卖家之间流动；现在，让我们专注于MagnetoCorp发表的第一篇论文。</p>
<div class="section" id="commercial-paper-lifecycle">
<h2>Commercial paper lifecycle<a class="headerlink" href="#commercial-paper-lifecycle" title="永久链接至标题">¶</a></h2>
<p>一张票据00001是由MagnetoCorp在5月31日发布。花点时间看看这个票据的第一种状态，它有不同的性质和值:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Owner</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Issue</span> <span class="n">date</span> <span class="o">=</span> <span class="mi">31</span> <span class="n">May</span> <span class="mi">2020</span>
<span class="n">Maturity</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">November</span> <span class="mi">2020</span>
<span class="n">Face</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">5</span><span class="n">M</span> <span class="n">USD</span>
<span class="n">Current</span> <span class="n">state</span> <span class="o">=</span> <span class="n">issued</span>
</pre></div>
</div>
<p>票据的状态是发行交易的结果，它带来了MagnetoCorp 的第一份商业票据的存在！请注意，这张票据的面值为500万美元，可在今年晚些时候赎回。查看当发行00001时，发行者和所有者是如何相同的。请注意，本票据可以惟一地标识为MagnetoCorp00001——发行方和票据属性的组合。最后，查看属性Current state = issue如何快速标识MagnetoCorp paper 00001在其生命周期中的阶段。</p>
<p>发行后不久，该票据被DigiBank收购。花点时间看看同样的商业票据是如何由于这次购买交易而发生变化的:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Owner</span> <span class="o">=</span> <span class="n">DigiBank</span>
<span class="n">Issue</span> <span class="n">date</span> <span class="o">=</span> <span class="mi">31</span> <span class="n">May</span> <span class="mi">2020</span>
<span class="n">Maturity</span> <span class="n">date</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">November</span> <span class="mi">2020</span>
<span class="n">Face</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">5</span><span class="n">M</span> <span class="n">USD</span>
<span class="n">Current</span> <span class="n">state</span> <span class="o">=</span> <span class="n">trading</span>
</pre></div>
</div>
<p>最显著的变化是所有者的变化——看看这家最初由MagnetoCorp拥有的票据现在是如何被DigiBank拥有的。我们可以想象，这张票据后来可能会被卖给BrokerHouse或HedgeMatic，然后相应的变更所有者。请注意，目前的状态如何让我们容易地确定，该票据现在正在交易。</p>
<p>六个月后，如果DigiBank仍持有商业票据，可向MagnetoCorp赎回:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Owner</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Issue</span> <span class="n">date</span> <span class="o">=</span> <span class="mi">31</span> <span class="n">May</span> <span class="mi">2020</span>
<span class="n">Maturity</span> <span class="n">date</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">November</span> <span class="mi">2020</span>
<span class="n">Face</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">5</span><span class="n">M</span> <span class="n">USD</span>
<span class="n">Current</span> <span class="n">state</span> <span class="o">=</span> <span class="n">redeemed</span>
</pre></div>
</div>
<p>最后的赎回交易结束了商业票据的生命周期——可以认为已经结束。通常必须保存赎回的商业票据的记录，而赎回状态允许我们快速识别这些票据。通过比较所有者和交易创建者的身份，票据所有者这个值可以用于对赎回交易执行访问控制。Fabric通过getCreator() 链码API支持这一点。如果将GO语言用作链码语言，还可以使用客户端标识链码库检索交易创建者的其他属性。</p>
</div>
<div class="section" id="transactions">
<h2>Transactions<a class="headerlink" href="#transactions" title="永久链接至标题">¶</a></h2>
<p>我们已经看到，票据00001的生命周期相对简单——它在发行、交易和赎回之间移动，这是由于发行、购买或赎回交易的结果。</p>
<p>这三笔交易由MagnetoCorp和DigiBank发起(两次)，驱动票据00001状态变化。让我们更详细地看看影响票据的交易:</p>
<div class="section" id="issue">
<h3>Issue<a class="headerlink" href="#issue" title="永久链接至标题">¶</a></h3>
<p>研究MagnetoCorp发起的第一笔交易:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Txn</span> <span class="o">=</span> <span class="n">issue</span>
<span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Issue</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">31</span> <span class="n">May</span> <span class="mi">2020</span> <span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">EST</span>
<span class="n">Maturity</span> <span class="n">date</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">November</span> <span class="mi">2020</span>
<span class="n">Face</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">5</span><span class="n">M</span> <span class="n">USD</span>
</pre></div>
</div>
<p>查看怎样发起交易具有属性和值的结构。这种交易结构与票据00001的结构不同，但非常匹配。这是因为它们是不同的东西——票据00001反映了PaperNet的状态，这是发起交易的结果。正是发起交易背后的逻辑(我们无法看到)获取这些属性并创建了票据。因为交易创建了票据，这意味着这些结构之间有着非常密切的关系。</p>
<p>参与此次发起交易的唯一组织是MagnetoCorp.。自然，MagnetoCorp需要批准这笔交易。一般来说，一张票据的发起者必须在发起新票据的交易上签字。</p>
</div>
<div class="section" id="buy">
<h3>Buy<a class="headerlink" href="#buy" title="永久链接至标题">¶</a></h3>
<p>接下来，研究一下将票据00001的所有权从MagnetoCorp转移到DigiBank的购买交易:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Txn</span> <span class="o">=</span> <span class="n">buy</span>
<span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Current</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">New</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">DigiBank</span>
<span class="n">Purchase</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">31</span> <span class="n">May</span> <span class="mi">2020</span> <span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">EST</span>
<span class="n">Price</span> <span class="o">=</span> <span class="mf">4.94</span><span class="n">M</span> <span class="n">USD</span>
</pre></div>
</div>
<p>在这张票据中，请查看购买交易如何拥有更少的属性。那是因为这个交易只修改了这张票据。只有新的所有者= DigiBank才会因为这笔交易而改变；其他的都是一样的。没关系，购买交易中最重要的是所有权的变更，事实上，在这次交易中，我们承认了票据的当前所有者，MagnetoCorp。</p>
<p>您可能会问，为什么在票据00001中没有记录购买时间和价格属性？这又回到了交易和票据之间的区别。494万美元的价格标签实际上是交易的属性，而不是票据的属性。花点时间想想这种不同；这并不像看上去那么明显。我们稍后将看到，账本将记录这两条信息——影响票据的所有交易的历史，以及它的最新状态。明确这种信息的分离是非常重要的。</p>
<p>同样值得记住的是，票据00001可能会被买卖很多次。虽然在我们的场景中跳过了一点，但是让我们检查一下，如果票据00001更改了所有权，我们可能会看到哪些交易。</p>
<p>如果被BigFund购买:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Txn</span> <span class="o">=</span> <span class="n">buy</span>
<span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Current</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">DigiBank</span>
<span class="n">New</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">BigFund</span>
<span class="n">Purchase</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">June</span> <span class="mi">2020</span> <span class="mi">12</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">00</span> <span class="n">EST</span>
<span class="n">Price</span> <span class="o">=</span> <span class="mf">4.93</span><span class="n">M</span> <span class="n">USD</span>
</pre></div>
</div>
<p>随后被HedgeMatic购买:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Txn</span> <span class="o">=</span> <span class="n">buy</span>
<span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Current</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">BigFund</span>
<span class="n">New</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">HedgeMatic</span>
<span class="n">Purchase</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">3</span> <span class="n">June</span> <span class="mi">2020</span> <span class="mi">15</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">00</span> <span class="n">EST</span>
<span class="n">Price</span> <span class="o">=</span> <span class="mf">4.90</span><span class="n">M</span> <span class="n">USD</span>
</pre></div>
</div>
<p>看看票据所有者是如何变化的，以及出了例子，价格是如何变化的。你能想出MagnetoCorp商业票据价格下跌的原因吗?</p>
<p>直观地说，购买交易要求销售和购买组织都需要在这样的交易上签名，这样就有证据表明交易双方达成了协议。</p>
</div>
<div class="section" id="redeem">
<h3>Redeem<a class="headerlink" href="#redeem" title="永久链接至标题">¶</a></h3>
<p>票据00001的赎回交易表示其生命周期的结束。在我们相对简单的例子中，DigiBank启动了将商业票据转回MagnetoCorp的交易:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Txn</span> <span class="o">=</span> <span class="n">redeem</span>
<span class="n">Issuer</span> <span class="o">=</span> <span class="n">MagnetoCorp</span>
<span class="n">Paper</span> <span class="o">=</span> <span class="mi">00001</span>
<span class="n">Current</span> <span class="n">owner</span> <span class="o">=</span> <span class="n">HedgeMatic</span>
<span class="n">Redeem</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">Nov</span> <span class="mi">2020</span> <span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">EST</span>
</pre></div>
</div>
<p>再次注意，赎回交易的属性非常少；对票据00001的所有更改都可以通过赎回交易逻辑计算：发起者将成为新的所有者，当前状态将变为赎回。在我们的示例中指定了当前所有者属性，以便可以根据票据的当前所有者对其进行检查。</p>
<p>从信任的角度来看，购买交易的相同推理也适用于赎回指令：参与交易的两个组织都需要在上面签名。</p>
</div>
</div>
<div class="section" id="the-ledger">
<h2>The Ledger<a class="headerlink" href="#the-ledger" title="永久链接至标题">¶</a></h2>
<p>在本主题中，我们已经看到交易和生成的票据状态是PaperNet中两个最重要的概念。实际上，我们将在任何超级账本Fabric分布式账本中看到这两个基本元素——一个包含所有对象的当前值的世界状态，以及一个记录导致当前世界状态的所有交易历史的区块链。</p>
<p>交易所需的签名是通过规则强制执行的，这些规则在将交易追加到账本之前进行评估。只有在提供了所需的签名之后，Fabric才会接受交易为有效。</p>
<p>你现在处在一个很好的位置，把这些想法转化为一份智能合约。如果您的编程有点生疏，不要担心，我们将提供理解程序代码的技巧和要点。掌握商业票据智能合约是设计自己的应用程序的第一步。或者，如果您是一位业务分析师，对一些编程比较熟悉，那么不要害怕继续深入研究!</p>
<!--- Licensed under Creative Commons Attribution 4.0 International License
https://creativecommons.org/licenses/by/4.0/ --></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="architecture.html" class="btn btn-neutral float-right" title="Process and Data Design" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scenario.html" class="btn btn-neutral" title="The scenario" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2019.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>