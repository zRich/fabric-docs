

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contract names &mdash; hyperledger-fabricdocs master 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="hyperledger-fabricdocs master 文档" href="../index.html"/>
        <link rel="up" title="Application design elements" href="designelements.html"/>
        <link rel="next" title="Chaincode namespace" href="chaincodenamespace.html"/>
        <link rel="prev" title="Application design elements" href="designelements.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          


          
            <a href="../index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=../_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="../_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="../_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="../_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="../_static/images/youtube_button.png"/></a>

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s new in v1.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html#release-notes">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developing_applications.html">Developing Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scenario.html">The scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis.html">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Process and Data Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="smartcontract.html">Smart Contract Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="application.html">Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="apis.html">APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="designelements.html">Application design elements</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Contract names</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#chaincode">Chaincode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name">Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application">Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-contract">Default contract</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="chaincodenamespace.html">Chaincode namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="transactioncontext.html">Transaction context</a></li>
<li class="toctree-l3"><a class="reference internal" href="transactionhandler.html">Transaction handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="endorsementpolicies.html">Endorsement policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="connectionprofile.html">Connection Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="connectionoptions.html">Connection Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="wallet.html">Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="gateway.html">Gateway</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops_guide.html">Operations Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_ref.html">Commands Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fabric-FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributions Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../questions.html">Still Have Questions?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../status.html">Status</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyperledger-fabricdocs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="developing_applications.html">Developing Applications</a> &raquo;</li>
        
          <li><a href="designelements.html">Application design elements</a> &raquo;</li>
        
      <li>Contract names</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developapps/contractname.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contract-names">
<span id="contract-names"></span><h1>Contract names<a class="headerlink" href="#contract-names" title="永久链接至标题">¶</a></h1>
<p><strong>Audience</strong>: Architects, application and smart contract developers,
administrators</p>
<p>A chaincode is a generic container for deploying code to a Hyperledger Fabric
blockchain network. One or more related smart contracts are defined within a
chaincode. Every smart contract has a name that uniquely identifies it within a
chaincode. Applications access a particular smart contract within an
instantiated chaincode using its contract name.</p>
<p>In this topic, we’re going to cover:</p>
<ul class="simple">
<li><a class="reference external" href="#chaincode">How a chaincode contains multiple smart contracts</a></li>
<li><a class="reference external" href="#name">How to assign a smart contract name</a></li>
<li><a class="reference external" href="#application">How to use a smart contract from an application</a></li>
<li><a class="reference external" href="#default-contract">The default smart contract</a></li>
</ul>
<div class="section" id="chaincode">
<span id="chaincode"></span><h2>Chaincode<a class="headerlink" href="#chaincode" title="永久链接至标题">¶</a></h2>
<p>In the <a class="reference external" href="./developing_applications.html">Developing Applications</a> topic, we can
see how the Fabric SDKs provide high level programming abstractions which help
application and smart contract developers to focus on their business problem,
rather than the low level details of how to interact with a Fabric network.</p>
<p>Smart contracts are one example of a high level programming abstraction, and it
is possible to define smart contracts within in a chaincode container. When a
chaincode is installed and instantiated, all the smart contracts within it are
made available to the corresponding channel.</p>
<p><img alt="contract.chaincode" src="../_images/develop.diagram.20.png" /> <em>Multiple smart contracts can be
defined within a chaincode. Each is uniquely identified by their name within a
chaincode.</em></p>
<p>In the diagram <a class="reference external" href="#chaincode">above</a>, chaincode A has three smart contracts
defined within it, whereas chaincode B has four smart contracts. See how the
chaincode name is used to fully qualify a particular smart contract.</p>
<p>The ledger structure is defined by a set of deployed smart contracts. That’s
because the ledger contains facts about the business objects of interest to the
network (such as commercial paper within PaperNet), and these business objects
are moved through their lifecycle (e.g. issue, buy, redeem) by the transaction
functions defined within a smart contract.</p>
<p>In most cases, a chaincode will only have one smart contract defined within it.
However, it can make sense to keep related smart contracts together in a single
chaincode. For example, commercial papers denominated in different currencies
might have contracts <code class="docutils literal notranslate"><span class="pre">EuroPaperContract</span></code>, <code class="docutils literal notranslate"><span class="pre">DollarPaperContract</span></code>,
<code class="docutils literal notranslate"><span class="pre">YenPaperContract</span></code> which might need to be kept synchronized with each other in
the channel to which they are deployed.</p>
</div>
<div class="section" id="name">
<span id="name"></span><h2>Name<a class="headerlink" href="#name" title="永久链接至标题">¶</a></h2>
<p>Each smart contract within a chaincode is uniquely identified by its contract
name. A smart contract can explicitly assign this name when the class is
constructed, or let the <code class="docutils literal notranslate"><span class="pre">Contract</span></code> class implicitly assign a default name.</p>
<p>Examine the <code class="docutils literal notranslate"><span class="pre">papercontract.js</span></code> chaincode
<a class="reference external" href="https://github.com/hyperledger/fabric-samples/blob/master/commercial-paper/organization/magnetocorp/contract/lib/papercontract.js#L31">file</a>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">CommercialPaperContract</span> <span class="kr">extends</span> <span class="nx">Contract</span> <span class="p">{</span>

    <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Unique name when multiple contracts per chaincode file</span>
        <span class="kr">super</span><span class="p">(</span><span class="s1">&#39;org.papernet.commercialpaper&#39;</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>See how the <code class="docutils literal notranslate"><span class="pre">CommercialPaperContract</span></code> constructor specifies the contract name as
<code class="docutils literal notranslate"><span class="pre">org.papernet.commercialpaper</span></code>. The result is that within the <code class="docutils literal notranslate"><span class="pre">papercontract</span></code>
chaincode, this smart contract is now associated with the contract name
<code class="docutils literal notranslate"><span class="pre">org.papernet.commercialpaper</span></code>.</p>
<p>If an explicit contract name is not specified, then a default name is assigned
– the name of the class.  In our example, the default contract name would be
<code class="docutils literal notranslate"><span class="pre">CommercialPaperContract</span></code>.</p>
<p>Choose your names carefully. It’s not just that each smart contract must have a
unique name; a well-chosen name is illuminating. Specifically, using an explicit
DNS-style naming convention is recommended to help organize clear and meaningful
names; <code class="docutils literal notranslate"><span class="pre">org.papernet.commercialpaper</span></code> conveys that the PaperNet network has
defined a standard commercial paper smart contract.</p>
<p>Contract names are also helpful to disambiguate different smart contract
transaction functions with the same name in a given chaincode. This happens when
smart contracts are closely related; their transaction names will tend to be the
same. We can see that a transaction is uniquely defined within a channel by the
combination of its chaincode and smart contract name.</p>
<p>Contract names must be unique within a chaincode file. Some code editors will
detect multiple definitions of the same class name before deployment. Regardless
the chaincode will return an error if multiple classes with the same contract
name are explicitly or implicitly specified.</p>
</div>
<div class="section" id="application">
<span id="application"></span><h2>Application<a class="headerlink" href="#application" title="永久链接至标题">¶</a></h2>
<p>Once a chaincode has been installed on a peer and instantiated on a channel, the
smart contracts in it are accessible to an application:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gateway</span><span class="p">.</span><span class="nx">getNetwork</span><span class="p">(</span><span class="sb">`papernet`</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">network</span><span class="p">.</span><span class="nx">getContract</span><span class="p">(</span><span class="s1">&#39;papercontract&#39;</span><span class="p">,</span> <span class="s1">&#39;org.papernet.commercialpaper&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">issueResponse</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">submitTransaction</span><span class="p">(</span><span class="s1">&#39;issue&#39;</span><span class="p">,</span> <span class="s1">&#39;MagnetoCorp&#39;</span><span class="p">,</span> <span class="s1">&#39;00001&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-05-31&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-11-30&#39;</span><span class="p">,</span> <span class="s1">&#39;5000000&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>See how the application accesses the smart contract with the
<code class="docutils literal notranslate"><span class="pre">contract.getContract()</span></code> method. The <code class="docutils literal notranslate"><span class="pre">papercontract</span></code> chaincode name
<code class="docutils literal notranslate"><span class="pre">org.papernet.commercialpaper</span></code> returns a <code class="docutils literal notranslate"><span class="pre">contract</span></code> reference which can be
used to submit transactions to issue commercial paper with the
<code class="docutils literal notranslate"><span class="pre">contract.submitTransaction()</span></code> API.</p>
</div>
<div class="section" id="default-contract">
<span id="default-contract"></span><h2>Default contract<a class="headerlink" href="#default-contract" title="永久链接至标题">¶</a></h2>
<p>The first smart contract defined in a chaincode is the called the <em>default</em>
smart contract. A default is helpful because a chaincode will usually have one
smart contract defined within it; a default allows the application to access
those transactions directly – without specifying a contract name.</p>
<p><img alt="default.contract" src="../_images/develop.diagram.21.png" /> <em>A default smart contract is the
first contract defined in a chaincode.</em></p>
<p>In this diagram, <code class="docutils literal notranslate"><span class="pre">CommercialPaperContract</span></code> is the default smart contract. Even
though we have two smart contracts, the default smart contract makes our
<a class="reference external" href="#application">previous</a> example easier to write:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gateway</span><span class="p">.</span><span class="nx">getNetwork</span><span class="p">(</span><span class="sb">`papernet`</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">network</span><span class="p">.</span><span class="nx">getContract</span><span class="p">(</span><span class="s1">&#39;papercontract&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">issueResponse</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">submitTransaction</span><span class="p">(</span><span class="s1">&#39;issue&#39;</span><span class="p">,</span> <span class="s1">&#39;MagnetoCorp&#39;</span><span class="p">,</span> <span class="s1">&#39;00001&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-05-31&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-11-30&#39;</span><span class="p">,</span> <span class="s1">&#39;5000000&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>This works because the default smart contract in <code class="docutils literal notranslate"><span class="pre">papercontract</span></code> is
<code class="docutils literal notranslate"><span class="pre">CommercialPaperContract</span></code> and it has an <code class="docutils literal notranslate"><span class="pre">issue</span></code> transaction. Note that the
<code class="docutils literal notranslate"><span class="pre">issue</span></code> transaction in <code class="docutils literal notranslate"><span class="pre">BondContract</span></code> can only be invoked by explicitly
addressing it. Likewise, even though the <code class="docutils literal notranslate"><span class="pre">cancel</span></code> transaction is unique, because
<code class="docutils literal notranslate"><span class="pre">BondContract</span></code> is <em>not</em> the default smart contract, it must also be explicitly
addressed.</p>
<p>In most cases, a chaincode will only contain a single smart contract, so careful
naming of the chaincode can reduce the need for developers to care about
chaincode as a concept. In the example code <a class="reference external" href="#default-contract">above</a> it feels
like <code class="docutils literal notranslate"><span class="pre">papercontract</span></code> is a smart contract.</p>
<p>In summary, contract names are a straightforward mechanism to identify
individual smart contracts within a given chaincode. Contract names make it easy
for applications to find a particular smart contract and use it to access the
ledger.</p>
<!--- Licensed under Creative Commons Attribution 4.0 International License
https://creativecommons.org/licenses/by/4.0/ --></div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="chaincodenamespace.html" class="btn btn-neutral float-right" title="Chaincode namespace" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="designelements.html" class="btn btn-neutral" title="Application design elements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2019.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'master',
            LANGUAGE:'zh_CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>